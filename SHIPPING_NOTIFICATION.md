# Shipping Notification System

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ–± –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞ —Å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–æ–º –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. Email Templates (`server/email-service.ts`)

**–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

- `generateTrackingUrl(carrier, trackingNumber)` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ—Å—ã–ª–∫–∏
- `generateShippingNotificationEmail(data)` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML-—à–∞–±–ª–æ–Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç–ø—Ä–∞–≤–∫–µ
- `sendShippingNotificationEmail(data)` - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–ª–∏–µ–Ω—Ç—É

### 2. Database Schema (`drizzle/schema.ts`)

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É `orders`:

- `carrier` - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–ª—É–∂–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏ (DHL, DPD, Austrian Post, GLS)
- `estimatedDelivery` - –û–∂–∏–¥–∞–µ–º–∞—è –¥–∞—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
- `trackingNumber` - –¢—Ä–µ–∫-–Ω–æ–º–µ—Ä –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è (—É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª)

### 3. tRPC Procedure (`server/routers.ts`)

**–ù–æ–≤–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞:** `orders.markAsShipped`

–î–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤. –í—ã–ø–æ–ª–Ω—è–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ admin)
2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –Ω–∞ 'shipped'
3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–∞, –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–∞ –∏ –æ–∂–∏–¥–∞–µ–º–æ–π –¥–∞—Ç—ã –¥–æ—Å—Ç–∞–≤–∫–∏
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—Ç–ø—Ä–∞–≤–∫—É email –∫–ª–∏–µ–Ω—Ç—É

## –®–∞–±–ª–æ–Ω Email

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ–º–µ—Ü–∫–æ–≥–æ (de) –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ (en) —è–∑—ã–∫–æ–≤
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- **–ë—Ä–µ–Ω–¥–∏–Ω–≥**: –§–∏—Ä–º–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞ M√∂belhaus (–∑–µ–ª–µ–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç)
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ö–Ω–æ–ø–∫–∞ "–û—Ç—Å–ª–µ–¥–∏—Ç—å –ø–æ—Å—ã–ª–∫—É" —Å –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Å–∞–π—Ç –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–∞

### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–∏—Å—å–º–∞

1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫** —Å –∏–∫–æ–Ω–∫–æ–π –ø–æ—Å—ã–ª–∫–∏ üì¶ –∏ –ª–æ–≥–æ—Ç–∏–ø–æ–º –º–∞–≥–∞–∑–∏–Ω–∞
2. **–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ** —Å –∏–º–µ–Ω–µ–º –∫–ª–∏–µ–Ω—Ç–∞
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–ø—Ä–∞–≤–∫–µ** - "–í–∞—à –∑–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!"
4. **–¢—Ä–µ–∫-–Ω–æ–º–µ—Ä** –≤ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–º –±–ª–æ–∫–µ —Å –∫—Ä—É–ø–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º
5. **–ö–Ω–æ–ø–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è** - –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∞–π—Ç –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–∞
6. **–î–µ—Ç–∞–ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∏**:
   - –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞
   - –ü–µ—Ä–µ–≤–æ–∑—á–∏–∫
   - –°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏
   - –û–∂–∏–¥–∞–µ–º–∞—è –¥–∞—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞)
7. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ** - —Å–æ–≤–µ—Ç—ã –¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è
8. **–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤
9. **–§—É—Ç–µ—Ä** —Å —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:

| –ü–µ—Ä–µ–≤–æ–∑—á–∏–∫ | URL —à–∞–±–ª–æ–Ω |
|------------|-----------|
| **DHL** | `https://www.dhl.at/de/privatkunden/pakete-empfangen/verfolgen.html?piececode={tracking}` |
| **DPD** | `https://tracking.dpd.de/parcelstatus?query={tracking}&locale=de_AT` |
| **Austrian Post** | `https://www.post.at/sv/sendungsdetails?snr={tracking}` |
| **GLS** | `https://gls-group.eu/AT/de/paketverfolgung?match={tracking}` |
| **Other** | –ü–æ–∏—Å–∫ Google —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–∞ –∏ —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–æ–º |

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```typescript
// –í –±—É–¥—É—â–µ–º –±—É–¥–µ—Ç UI –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è:
// 1. –ü—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "processing"
// 2. –§–æ—Ä–º—ã –¥–ª—è –≤–≤–æ–¥–∞ —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–∞ –∏ –≤—ã–±–æ—Ä–∞ –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–∞
// 3. –ö–Ω–æ–ø–∫–∏ "–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ tRPC

```typescript
import { trpc } from '@/lib/trpc';

const markAsShipped = trpc.orders.markAsShipped.useMutation();

await markAsShipped.mutateAsync({
  orderId: 123,
  trackingNumber: 'DHL123456789',
  carrier: 'DHL',
  estimatedDelivery: '15.01.2026', // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
});
```

### –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ email (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

```typescript
import { sendShippingNotificationEmail } from './server/email-service';

await sendShippingNotificationEmail({
  orderNumber: 'ORD-123456',
  customerName: 'Max Mustermann',
  customerEmail: 'max@example.com',
  trackingNumber: 'DHL123456789',
  carrier: 'DHL',
  estimatedDelivery: '15.01.2026',
  shippingMethod: 'express',
  language: 'de',
});
```

## Workflow

### –¢–∏–ø–∏—á–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–∞

1. **–ö–ª–∏–µ–Ω—Ç –æ—Ñ–æ—Ä–º–ª—è–µ—Ç –∑–∞–∫–∞–∑** ‚Üí –°—Ç–∞—Ç—É—Å: `processing`
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞

2. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≥–æ—Ç–æ–≤–∏—Ç –∑–∞–∫–∞–∑ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ**
   - –£–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã
   - –°–æ–∑–¥–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–∞
   - –ü–æ–ª—É—á–∞–µ—Ç —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä

3. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ç–º–µ—á–∞–µ—Ç –∑–∞–∫–∞–∑ –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π**
   - –í—ã–∑—ã–≤–∞–µ—Ç `orders.markAsShipped` —Å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–æ–º
   - –°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ `shipped`
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è email –∫–ª–∏–µ–Ω—Ç—É**

4. **–ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**
   - –í–∏–¥–∏—Ç —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä
   - –ú–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø–æ—Å—ã–ª–∫—É –ø–æ —Å—Å—ã–ª–∫–µ
   - –ó–Ω–∞–µ—Ç –æ–∂–∏–¥–∞–µ–º—É—é –¥–∞—Ç—É –¥–æ—Å—Ç–∞–≤–∫–∏

5. **–î–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞** ‚Üí –°—Ç–∞—Ç—É—Å: `delivered`
   - (–í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å email –æ –¥–æ—Å—Ç–∞–≤–∫–µ)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã

–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã:

```bash
pnpm test shipping-notification.test.ts
```

–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—é –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö URL –¥–ª—è –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—é –Ω–µ–º–µ—Ü–∫–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—é –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
- –í–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–∞ –∏ —Å—Å—ã–ª–∫–∏
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ–º–æ–π –¥–∞—Ç—ã –¥–æ—Å—Ç–∞–≤–∫–∏
- –ü–µ—Ä–µ–≤–æ–¥ —Å–ø–æ—Å–æ–±–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏
- –ù–∞–ª–∏—á–∏–µ —Å–æ–≤–µ—Ç–æ–≤ –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ Stripe
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
3. –í—ã–∑–æ–≤–∏—Ç–µ `orders.markAsShipped` —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
   ```typescript
   {
     orderId: <id_–∑–∞–∫–∞–∑–∞>,
     trackingNumber: 'TEST123456',
     carrier: 'DHL',
     estimatedDelivery: '15.01.2026'
   }
   ```
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç–æ–≤—ã–π —è—â–∏–∫ –∫–ª–∏–µ–Ω—Ç–∞
5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ï—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ email –Ω–µ —É–¥–∞–ª–∞—Å—å, –æ—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É
- –ó–∞–∫–∞–∑ –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é

## –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

- **–¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã** –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å `orders.markAsShipped`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏: `ctx.user.role !== 'admin'` ‚Üí `Error: Unauthorized`
- –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ–∏ –∑–∞–∫–∞–∑—ã

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–æ–≤

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `generateTrackingUrl` –≤ `server/email-service.ts`:

```typescript
export function generateTrackingUrl(carrier: string, trackingNumber: string): string {
  const carriers: Record<string, string> = {
    'DHL': `https://...`,
    '–ù–æ–≤—ã–π –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫': `https://tracking-url?track=${trackingNumber}`,
  };
  // ...
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞

–°–µ–π—á–∞—Å —è–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - –Ω–µ–º–µ—Ü–∫–∏–π. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

1. –ü–æ–ª–µ `language` –≤ —Ç–∞–±–ª–∏—Ü—É `orders` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —è–∑—ã–∫–∞ –∏–∑ Stripe metadata
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ

–°–æ–∑–¥–∞–π—Ç–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ `delivered`:

1. –ù–æ–≤—ã–π —à–∞–±–ª–æ–Ω email `generateDeliveryConfirmationEmail`
2. –ü—Ä–æ—Ü–µ–¥—É—Ä—É `orders.markAsDelivered`
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `[Orders]`:

```
[Orders] Shipping notification sent for order ORD-123456
[Orders] Failed to send shipping notification: <error details>
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- API –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- Email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã–π Manus API
- –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –æ—Ç–º–µ—á–∞—Ç—å –∑–∞–∫–∞–∑—ã –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ
- –¢—Ä–µ–∫-–Ω–æ–º–µ—Ä–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –û—Ç–ø—Ä–∞–≤–∫–∞ email –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–ø—Ä–æ—Å–∞
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏: ~500-1000ms
- Retry –º–µ—Ö–∞–Ω–∏–∑–º –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **UI –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏** –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∞–º–∏
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞** —á–µ—Ä–µ–∑ webhook –æ—Ç –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–æ–≤
3. **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
4. **SMS-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –¥–ª—è –≤–∞–∂–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
5. **–ò—Å—Ç–æ—Ä–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è** —Å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
6. **–ó–∞–ø—Ä–æ—Å –æ—Ç–∑—ã–≤–∞** —á–µ—Ä–µ–∑ 2-3 –¥–Ω—è –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∞–≤–∫–∏
